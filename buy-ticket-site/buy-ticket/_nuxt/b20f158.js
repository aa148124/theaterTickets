(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{346:function(t,n,e){t.exports=function(){"use strict";var t=1e3,n=6e4,e=36e5,r="millisecond",i="second",s="minute",u="hour",a="day",o="week",c="month",l="quarter",d="year",h="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,$={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var n=["th","st","nd","rd"],e=t%100;return"["+t+(n[(e-20)%10]||n[e]||n[0])+"]"}},_=function(t,n,e){var r=String(t);return!r||r.length>=n?t:""+Array(n+1-r.length).join(e)+t},y={s:_,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),i=e%60;return(n<=0?"+":"-")+_(r,2,"0")+":"+_(i,2,"0")},m:function t(n,e){if(n.date()<e.date())return-t(e,n);var r=12*(e.year()-n.year())+(e.month()-n.month()),i=n.clone().add(r,c),s=e-i<0,u=n.clone().add(r+(s?-1:1),c);return+(-(r+(e-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:d,w:o,d:a,D:h,h:u,m:s,s:i,ms:r,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",S={};S[g]=$;var p=function(t){return t instanceof k},M=function t(n,e,r){var i;if(!n)return g;if("string"==typeof n){var s=n.toLowerCase();S[s]&&(i=s),e&&(S[s]=e,i=s);var u=n.split("-");if(!i&&u.length>1)return t(u[0])}else{var a=n.name;S[a]=n,i=a}return!r&&i&&(g=i),i||!r&&g},w=function(t,n){if(p(t))return t.clone();var e="object"==typeof n?n:{};return e.date=t,e.args=arguments,new k(e)},D=y;D.l=M,D.i=p,D.w=function(t,n){return w(t,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var k=function(){function $(t){this.$L=M(t.locale,null,!0),this.parse(t)}var _=$.prototype;return _.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if(D.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var r=n.match(m);if(r){var i=r[2]-1||0,s=(r[7]||"0").substring(0,3);return e?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(n)}(t),this.$x=t.x||{},this.init()},_.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},_.$utils=function(){return D},_.isValid=function(){return!(this.$d.toString()===f)},_.isSame=function(t,n){var e=w(t);return this.startOf(n)<=e&&e<=this.endOf(n)},_.isAfter=function(t,n){return w(t)<this.startOf(n)},_.isBefore=function(t,n){return this.endOf(n)<w(t)},_.$g=function(t,n,e){return D.u(t)?this[n]:this.set(e,t)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(t,n){var e=this,r=!!D.u(n)||n,l=D.p(t),f=function(t,n){var i=D.w(e.$u?Date.UTC(e.$y,n,t):new Date(e.$y,n,t),e);return r?i:i.endOf(a)},m=function(t,n){return D.w(e.toDate()[t].apply(e.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(n)),e)},v=this.$W,$=this.$M,_=this.$D,y="set"+(this.$u?"UTC":"");switch(l){case d:return r?f(1,0):f(31,11);case c:return r?f(1,$):f(0,$+1);case o:var g=this.$locale().weekStart||0,S=(v<g?v+7:v)-g;return f(r?_-S:_+(6-S),$);case a:case h:return m(y+"Hours",0);case u:return m(y+"Minutes",1);case s:return m(y+"Seconds",2);case i:return m(y+"Milliseconds",3);default:return this.clone()}},_.endOf=function(t){return this.startOf(t,!1)},_.$set=function(t,n){var e,o=D.p(t),l="set"+(this.$u?"UTC":""),f=(e={},e[a]=l+"Date",e[h]=l+"Date",e[c]=l+"Month",e[d]=l+"FullYear",e[u]=l+"Hours",e[s]=l+"Minutes",e[i]=l+"Seconds",e[r]=l+"Milliseconds",e)[o],m=o===a?this.$D+(n-this.$W):n;if(o===c||o===d){var v=this.clone().set(h,1);v.$d[f](m),v.init(),this.$d=v.set(h,Math.min(this.$D,v.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},_.set=function(t,n){return this.clone().$set(t,n)},_.get=function(t){return this[D.p(t)]()},_.add=function(r,l){var h,f=this;r=Number(r);var m=D.p(l),v=function(t){var n=w(f);return D.w(n.date(n.date()+Math.round(t*r)),f)};if(m===c)return this.set(c,this.$M+r);if(m===d)return this.set(d,this.$y+r);if(m===a)return v(1);if(m===o)return v(7);var $=(h={},h[s]=n,h[u]=e,h[i]=t,h)[m]||1,_=this.$d.getTime()+r*$;return D.w(_,this)},_.subtract=function(t,n){return this.add(-1*t,n)},_.format=function(t){var n=this,e=this.$locale();if(!this.isValid())return e.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=D.z(this),s=this.$H,u=this.$m,a=this.$M,o=e.weekdays,c=e.months,l=function(t,e,i,s){return t&&(t[e]||t(n,r))||i[e].slice(0,s)},d=function(t){return D.s(s%12||12,t,"0")},h=e.meridiem||function(t,n,e){var r=t<12?"AM":"PM";return e?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:D.s(a+1,2,"0"),MMM:l(e.monthsShort,a,c,3),MMMM:l(c,a),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:l(e.weekdaysMin,this.$W,o,2),ddd:l(e.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:D.s(s,2,"0"),h:d(1),hh:d(2),a:h(s,u,!0),A:h(s,u,!1),m:String(u),mm:D.s(u,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:i};return r.replace(v,(function(t,n){return n||m[t]||i.replace(":","")}))},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(r,h,f){var m,v=D.p(h),$=w(r),_=($.utcOffset()-this.utcOffset())*n,y=this-$,g=D.m(this,$);return g=(m={},m[d]=g/12,m[c]=g,m[l]=g/3,m[o]=(y-_)/6048e5,m[a]=(y-_)/864e5,m[u]=y/e,m[s]=y/n,m[i]=y/t,m)[v]||y,f?g:D.a(g)},_.daysInMonth=function(){return this.endOf(c).$D},_.$locale=function(){return S[this.$L]},_.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),r=M(t,n,!0);return r&&(e.$L=r),e},_.clone=function(){return D.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},$}(),x=k.prototype;return w.prototype=x,[["$ms",r],["$s",i],["$m",s],["$H",u],["$W",a],["$M",c],["$y",d],["$D",h]].forEach((function(t){x[t[1]]=function(n){return this.$g(n,t[0],t[1])}})),w.extend=function(t,n){return t.$i||(t(n,k,w),t.$i=!0),w},w.locale=M,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=S[g],w.Ls=S,w.p={},w}()},369:function(t,n,e){"use strict";e.r(n);var r=e(144),o=e(10);var c=e(346),l=e.n(c),d=e(11),h=e.n(d),f={data:function(){return{filmId:"",film:{},imgSrc:"",commentList:[],dialogVisible:!1,value:0,comment:{userId:"",filmId:"",content:"",score:""}}},created:function(){this.filmId=this.$route.params.filmInfo,this.init(),this.getHotComment()},methods:{init:function(){var t=this;r.a(this.filmId).then((function(n){t.film=n.data,t.film.releaseTime=l()(t.film.releaseTime).format("YYYY-MM-DD HH:mm:ss"),t.imgSrc=t.film.poster}))},getHotComment:function(){var t,n=this;(t=this.filmId,Object(o.a)({url:"/comment/getHotComment/".concat(t),method:"get"})).then((function(t){n.commentList=t.data}))},liked:function(t){var n=this;(function(t,n){return Object(o.a)({url:"/comment/likeComment/".concat(t,"/").concat(n),method:"put"})})(t,2).then((function(t){n.getHotComment()}))},handleClose:function(t){this.$confirm("确认关闭？").then((function(n){t()})).catch((function(t){}))},addComment:function(){var t,n=this,e=h.a.get("userId");this.comment.score=2*this.value,this.comment.filmId=this.filmId,this.comment.userId=e,(t=this.comment,Object(o.a)({url:"/comment/addComment",method:"post",data:t})).then((function(t){200==t.code&&(n.$message.success("提交成功"),n.dialogVisible=!1,n.getHotComment())}))},shortComment:function(){h.a.get("token")?dialogVisible=!0:loginEvent.$emit("loginDialogEvent")}}},m=e(13),component=Object(m.a)(f,(function(){var t=this,n=t._self._c;return n("div",[n("div",{staticClass:"details"},[n("div",[n("img",{attrs:{id:"filmImg",src:t.imgSrc}})]),t._v(" "),n("div",[n("div",[n("div",{staticStyle:{"font-size":"26px"}},[t._v(t._s(t.film.filmName))])]),t._v(" "),n("div",[n("div",[t._v("主演："+t._s(t.film.performer))])]),t._v(" "),n("div",[n("div",[t._v("导演："+t._s(t.film.director))])]),t._v(" "),n("div",[n("div",[t._v("制片国家/地区："+t._s(t.film.region))])]),t._v(" "),n("div",[n("div",[t._v(t._s(t.film.releaseTime)+"中国大陆上映")])]),t._v(" "),n("div",[n("div",{staticClass:"plotIntroduction"},[t._v("剧情介绍:"+t._s(t.film.synopsis))])])])]),t._v(" "),n("div",{staticClass:"comment"},[n("div",{staticStyle:{width:"1100px"}},[n("div",{staticClass:"title"},[t._v("\n        热门短评\n        "),n("el-button",{staticStyle:{float:"right",width:"80px"},attrs:{size:"small",round:""},on:{click:t.shortComment}},[t._v("写短评")])],1),t._v(" "),t._l(t.commentList,(function(e){return n("div",{key:e.id,staticStyle:{display:"flex","margin-top":"20px"}},[n("div",{staticStyle:{"margin-right":"20px"}},[n("el-avatar",{attrs:{size:50,src:e.icon}})],1),t._v(" "),n("div",[n("div",[t._v("\n            "+t._s(e.nickName)+"\n          ")]),t._v(" "),n("div",{staticStyle:{width:"1000px"}},[n("span",[n("span",[t._v(t._s(e.commentTime))]),t._v(" "),n("div",{staticStyle:{display:"flex"}},[t._l(e.score,(function(e,r){return n("div",{key:r+"-only"},[r%2==0?n("img",{attrs:{src:"https://dengkunhou.oss-cn-guangzhou.aliyuncs.com/%E5%B7%A6%E4%BA%AE.png"}}):t._e(),t._v(" "),r%2==1?n("img",{attrs:{src:"https://dengkunhou.oss-cn-guangzhou.aliyuncs.com/%E5%8F%B3%E4%BA%AE.png"}}):t._e()])})),t._v(" "),e.score%2==1?n("div",[n("img",{attrs:{src:"https://dengkunhou.oss-cn-guangzhou.aliyuncs.com/%E5%8F%B3%E7%81%B0.png"}})]):t._e(),t._v(" "),t._l(parseInt((10-e.score)/2),(function(t){return n("div",{key:t},[n("img",{attrs:{src:"https://dengkunhou.oss-cn-guangzhou.aliyuncs.com/%E5%B7%A6%E7%81%B0.png"}}),n("img",{attrs:{src:"https://dengkunhou.oss-cn-guangzhou.aliyuncs.com/%E5%8F%B3%E7%81%B0.png"}})])}))],2)]),t._v(" "),e.isLiked?n("span",{staticStyle:{float:"right"}},[n("img",{attrs:{src:"https://dengkunhou.oss-cn-guangzhou.aliyuncs.com/%E5%B7%B2%E8%B5%9E.png"},on:{click:function(n){return t.liked(e.id)}}}),t._v(t._s(e.liked)+"\n            ")]):n("span",{staticStyle:{float:"right"}},[n("img",{attrs:{src:"https://dengkunhou.oss-cn-guangzhou.aliyuncs.com/%E6%9C%AA%E8%B5%9E.png"},on:{click:function(n){return t.liked(e.id)}}}),t._v(t._s(e.liked)+"\n            ")])]),t._v(" "),n("div",{staticStyle:{"margin-top":"20px","padding-bottom":"20px","font-size":"16px"}},[t._v("\n            "+t._s(e.content)+"\n          ")]),t._v(" "),n("hr",{staticStyle:{border:"1px solid #e5e5e5"}})])])}))],2)]),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(n){t.dialogVisible=n}}},[n("div",{staticStyle:{display:"flex","justify-content":"center"}},[n("div",[n("el-rate",{attrs:{"show-text":"","allow-half":""},model:{value:t.value,callback:function(n){t.value=n},expression:"value"}})],1)]),t._v(" "),n("div",{staticStyle:{"margin-top":"30px"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:t.comment.content,callback:function(n){t.$set(t.comment,"content",n)},expression:"comment.content"}})],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticStyle:{width:"60px"},attrs:{size:"small"},on:{click:function(n){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{staticStyle:{width:"60px"},attrs:{type:"primary",size:"small"},on:{click:function(n){return t.addComment()}}},[t._v("提 交")])],1)])],1)}),[],!1,null,null,null);n.default=component.exports}}]);