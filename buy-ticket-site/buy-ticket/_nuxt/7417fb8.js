(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{347:function(t,e,r){"use strict";r.d(e,"d",(function(){return l})),r.d(e,"c",(function(){return d})),r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return f})),r.d(e,"e",(function(){return v}));var n=r(10),o=r(349),c=r.n(o);function l(t,e,r){return Object(n.a)({url:"/order/getOrdersByUserId/".concat(t,"/").concat(e,"/").concat(r),method:"get"})}function d(t){return Object(n.a)({url:"/order/getOrderTotalByUserId/".concat(t),method:"get"})}function m(t){return Object(n.a)({url:"/order/addOrder",method:"post",data:t})}function f(t){return Object(n.a)({url:"/order/getOrderById/".concat(t),method:"get"})}function v(data){return Object(n.a)({url:"/order/pay",method:"put",headers:{"content-type":"application/x-www-form-urlencoded"},data:c.a.stringify(data)})}},348:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return c}));var n=r(10);function o(t){return Object(n.a)({url:"/arrange/getArrangeByFilmId/".concat(t),method:"get"})}function c(t){return Object(n.a)({url:"/arrange/getArrangeById/".concat(t),method:"get"})}},352:function(t,e){},356:function(t,e,r){"use strict";r.r(e);r(207);var n=r(348),o=r(347),c={data:function(){return{tableData:[{filmName:"",date:"",roomName:"",seat:""}],orderId:"",sum:0,order:{},arrangeId:"",arrange:{},filmName:"",pay:{id:""}}},created:function(){this.Time()},mounted:function(){this.init()},methods:{init:function(){var t=this,e=window.location.href;this.orderId=e.split("=")[1],o.b(this.orderId).then((function(e){200==e.code&&(t.order=e.data.order,t.sum=e.data.time,console.log(t.order),t.arrangeId=t.order.arrangeId,t.tableData[0].seat=t.order.seat,console.log(t.tableData),n.b(t.arrangeId).then((function(e){200==e.code&&(t.tableData[0].roomName=e.data.room.roomName,t.tableData[0].filmName=e.data.film.filmName,t.tableData[0].date=e.data.playTime,console.log(e.data))})))}))},submit:function(){var t=this;this.pay.id=this.orderId,o.e(this.pay).then((function(e){200==e.code&&(t.$message.success("支付成功"),t.$router.push({name:"profile",params:{activeIndex:"1"}}))})).catch((function(e){t.$message.error(e.msg)}))},Time:function(){var t=this;setInterval((function(){t.sum>0&&(t.sum-=1)}),1e3)}}},l=r(13),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-bottom":"100px","margin-top":"20px"}},[e("div",[e("el-steps",{attrs:{active:2,"align-center":""}},[e("el-step",{attrs:{title:"选择影片场次"}}),t._v(" "),e("el-step",{attrs:{title:"选择座位"}}),t._v(" "),e("el-step",{attrs:{title:"15分钟内付款"}}),t._v(" "),e("el-step",{attrs:{title:"影院取票观影"}})],1)],1),t._v(" "),e("div",{staticStyle:{"justify-content":"center",display:"flex",margin:"40px 0 40px 0"}},[e("div",{staticClass:"pay-mid"},[e("div",{staticStyle:{margin:"40px",display:"flex"}},[t._m(0),t._v(" "),e("div",[e("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("\n            请在"+t._s(parseInt(t.sum/60))+"分钟"+t._s(t.sum%60)+"秒内完成支付\n          ")]),t._v(" "),e("div",{staticStyle:{color:"#f03d37"}},[t._v("\n            超时订单会自动取消，如遇支付问题，请致电猫眼客服:1010-533\n          ")])])])])]),t._v(" "),t._m(1),t._v(" "),e("div",{staticStyle:{"justify-content":"center",display:"flex"}},[e("div",{staticStyle:{width:"1200px"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{prop:"filmName",label:"影片",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"date",label:"时间",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"roomName",label:"影厅",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{prop:"seat",label:"座位",align:"center"}})],1)],1)]),t._v(" "),e("div",{staticStyle:{"justify-content":"center",display:"flex","margin-top":"100px"}},[e("div",{staticStyle:{width:"1200px"}},[e("div",{staticStyle:{float:"right"}},[t._v("实际支付:"+t._s(t.order.price)+"元")])])]),t._v(" "),e("div",{staticStyle:{"justify-content":"center",display:"flex","margin-top":"20px"}},[e("div",{staticStyle:{width:"1200px"}},[e("div",{staticStyle:{float:"right"}},[e("el-button",{attrs:{type:"danger",round:""},on:{click:function(e){return t.submit()}}},[t._v("确认支付")])],1)])])])}),[function(){var t=this._self._c;return t("div",{staticStyle:{"margin-right":"20px"}},[t("img",{attrs:{src:"https://dengkunhou.oss-cn-guangzhou.aliyuncs.com/b681f7e04b084228b25153d9e91003a4.jpg"}})])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"justify-content":"center",display:"flex",margin:"10px 0 10px 0"}},[e("div",{staticStyle:{width:"1200px"}},[t._v("\n      请仔细核对场次信息，出票后将"),e("span",{staticStyle:{color:"#faaf00"}},[t._v("无法退票和改签")])])])}],!1,null,null,null);e.default=component.exports}}]);